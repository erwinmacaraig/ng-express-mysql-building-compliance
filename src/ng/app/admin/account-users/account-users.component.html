<app-admin-account-info [accountId]="accountId" class="to-hide-in-show-profile-update"></app-admin-account-info>
<div class="row filter-container to-hide-in-show-profile-update">
  <div class="col l4 m5 s12">
		<div class="search-field">
			<input type="text" placeholder="Search User" id="searchUsers" (keyup)="searchByUserAndEmail($event)">
			<span class="material-icons">search</span>
		</div>
  </div>
  <div class="col l2 m4 s6">
      <select class="filter-by">
        <option value="0" selected>Filter By (All)</option>
        <option value=""></option>
      </select>
  </div>
  <div class="col l2 m6 s6">
		<select class="sort-by">
			<option value="0" selected>Sort By</option>
			<option value="user-name-desc">User Name Descending</option>
			<option value="user-name-asc">User Name Ascending</option>
		</select>
  </div>
  <div class="col l2 m6 s12">
		<select class="bulk-manage">
			<option value="0" selected disabled>Select Action</option>
			<option value="archive" >Archive selected</option>
		</select>
  </div>
  <div class="col l2 m3 s12 ">
		<button class="btn orange waves-effect waves-light add-peep" [routerLink]="['/admin', 'add-account-user', accountId]">
			<span class="image"></span>
			Add New User
		</button>
	</div>
</div>
<div class="row" class="to-hide-in-show-profile-update">
  <div class="col  s12">
    <table class="table striped table-peep">
      <thead>
        <tr>
          <th><p class="checkbox">
            <input id="allUsers" class="filled-in" type="checkbox">
            <label for="allUsers">User Name</label>
          </p></th>
          <th>
            Email
          </th>
          <th>Mobile No.</th>
          <th>Location Name</th>
          <th>Account Role</th>
          <th>ECO Role</th>
          <th style="width: 10%;">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of userObjects">
          <td>{{user['first_name']}} {{user['last_name']}}</td>
          <td>
            {{user['email']}}
          </td>
          <td>
            {{user['mobile_number']}}
          </td>
          <!--
             <td colspan="3">
            <table width="350px" [ngStyle]="{'border': '0'}">
              <tr *ngFor="let loc of user['locations-arr']">
                <td width="150px" [ngStyle]="{'border': '0'}">{{loc['location-name']}} {{loc['location-parent']}}</td>
                <td width="50px" [ngStyle]="{'border': '0'}"><span *ngFor="let ar of loc['account-role']" [ngStyle]="{'display': 'block'}">{{ar}}</span></td>
                <td width="150px" [ngStyle]="{'border': '0'}"><span *ngFor="let em of loc['em-role']" [ngStyle]="{'display': 'block'}"> {{em}}</span></td>
              </tr>
            </table>
          </td>
          -->
          <td>
            <div *ngFor="let loc of user['locations-arr']">
                <span [ngStyle]="{'display': 'block'}">{{loc['location-name']}} {{loc['location-parent']}}<br></span>
                <br>
            </div>
          </td>

          <td>
            <div *ngFor="let loc of user['locations-arr']">
                <span *ngFor="let ar of loc['account-role']" [ngStyle]="{'display': 'block'}">{{ar}}<br></span>
                <br>
            </div>
          </td>

          <td>
            <div *ngFor="let loc of user['locations-arr']">
              <span *ngFor="let em of loc['em-role']" [ngStyle]="{'display': 'block'}"> {{em}} <br></span>
              <br>
            </div>
          </td>

          <td>
              <select (change)="selectActionChangeEvent(user, $event)">
                <option value="0" disabled selected>Select Action</option>
                <option value="profile">Update Profile</option>
                <option value="credential">Update Credential</option>
                <option value="location">Assign Location & Role</option>
              </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="row" class="to-hide-in-show-profile-update">
  <div class="col l12 m12 s12 center pagination">
    <div class="inline-block">
      <button class="btn blue" (click)="prevPage()"> Prev </button>
    </div>

    <div class="inline-block select">
      <select #selectPage ngModel [(ngModel)]="currentPage" (change)="pageChange()">
        <option *ngFor="let p of createRange; let i = index" value="{{i}}">{{i+1}}</option>
      </select>
    </div>

    <div class="inline-block">
      <button class="btn blue" (click)="nextPage()"> Next </button>
    </div>
  </div>
</div>
<div preloader></div>

<div class="update-profile-container" hidden >
    <div class="row">
        <div class="col l5 m12 s12">
            <form #formProfile="ngForm" (submit)="submitUpdateProfile(formProfile)" >

                <h5>Update {{updateProfileData.user.first_name}} {{updateProfileData.user.last_name}} Profile</h5>
                <div class="row">
                    <div class="col s12 input-field">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="first_name" ngModel [ngModel]="updateProfileData.user.first_name" required>
                    </div>
                    <div class="col s12 input-field">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="last_name" ngModel [ngModel]="updateProfileData.user.last_name" required>
                    </div>
                    <div class="col s12 input-field">
                        <label for="contactInformation">Contact Information</label>
                        <input type="text" id="contactInformation" ngModel [ngModel]="updateProfileData.user.mobile_number" name="mobile_number" >
                    </div>

                    <input type="text" name="user_id" ngModel [ngModel]="updateProfileData.user.user_id" required style="visibility: hidden;">
                    <!-- <div class="col s12">
                        <label for="userEmail">Email</label>
                        <input type="text" id="userEmail" name="email" ngModel pattern="[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*" required>
                    </div> -->
                </div>

                <div class="row button-container">
                    <div class="col s12 m12 l12 right-align">
                        <a  class="btn grey lighten-1 waves-light waves-effect modal-close" (click)="updateProfileData.hideForm()">Cancel</a>
                        <button type="submit" class="btn orange waves-light waves-effect" [disabled]="formProfile.invalid">Submit</button>
                    </div>
                </div>


            </form>
        </div>
    </div>
</div>
